<p-dialog [header]="dialogHeader" [modal]="true" [(visible)]="editDialogVisible" [style]="{ width: '50rem' }"
    (onHide)="onDismiss()">
    <div style="display: flex; flex-direction: column">
        <form [formGroup]="createCategoryForm">
            <div style="display: flex; flex-direction: column;">
                <br>

                <!-- Label -->
                <div class="field p-fluid">
                    <label class="font-semibold w-10rem">Label</label>
                    <input pInputText type="text" formControlName="label" />
                    <small *ngIf="createCategoryForm.get('label')?.touched && createCategoryForm.get('label')?.errors?.['required']"
                        class="p-error">Label is required
                    </small>
                </div>

                <!-- Subcategories Input -->
                <div class="field p-fluid">
                    <label class="font-semibold w-10rem">Sub-categories</label>
                    <div class="flex gap-2">
                        <input
                            pInputText
                            type="text"
                            [(ngModel)]="subcategoryInput"
                            name="subcategoryInput"
                            [ngModelOptions]="{ standalone: true }"
                            (keydown.enter)="addSubcategory(); $event.preventDefault()" />
                        <p-button label="Add" (onClick)="addSubcategory()" severity="info" [disabled]="!subcategoryInput.trim()" />
                    </div>
                </div>

                <!-- Subcategories Chips -->
                <div class="field p-fluid mt-2">
                    <div class="flex flex-wrap gap-2">
                        <p-chip *ngFor="let sub of subcategories" [label]="sub" (remove)="removeSubcategory(sub)" removable />
                    </div>
                </div>
            </div>
        </form>

        <!-- Buttons -->
        <div class="field col-12">
            <div class="flex justify-content-end gap-2">
                <p-button label="Cancel" [outlined]="true" severity="danger" (onClick)="onDismiss()" />
                <p-button label="Save" severity="contrast" (onClick)="handleAdd()" [loading]="submitted"
                    [disabled]="submitted || !createCategoryForm.valid" />
            </div>
        </div>
    </div>
</p-dialog>
